<!DOCTYPE html>
<html>
@Head
<body class="hold-transition skin-blue layout-top-nav">
    <div class="wrapper">
        @NavBar
        <div class="content-wrapper">
            <section class="content">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">Tables</h3>
                        <span class="label label-primary pull-right"><i class="fa fa-database fa-2x"></i></span>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div id="button_group_one" class="col-md-3 col-sm-6"></div>
                            <div id="button_group_two" class="col-md-2 col-sm-4 pull-right text-right"></div>
                        </div>
                        <table id="database_objects" class="table table-bordered table-striped dataTable" role="grid">
                            <thead>
                                <tr>
                                    <th>Schema</th>
                                    <th>Table</th>
                                    <th>Column</th>
                                    <th>Type</th>
                                    <th>Nulls</th>
                                    <th title='Comments' class="toggle"><span>Comments</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            <script>
                var config = {
                    pagination: true
                }
            </script>
        </div>
        @Footer
    </div>

    @Script
    <script src="database.js"></script>
    <script>
        window.onload = function () {
            var jsData = @JsonData;

            let params = (new URL(document.location)).searchParams;
            let name = params.get("sc");
            var database_objects = document.getElementById('database_objects').lastChild;
            for (var i = 0; i < jsData.length; i++) {
                if (jsData[i].SchemaName.toLowerCase() == sc.toLowerCase()) {
                    var tr = document.createElement('tr');

                    var fTd = document.createElement('td');
                    fTd.innerHTML = jsData[i].SchemaName;
                    tr.appendChild(fTd);

                    var sTd = document.createElement('td');
                    sTd.innerHTML = jsData[i].TableName;
                    tr.appendChild(sTd);

                    var tTd = document.createElement('td');
                    tTd.innerHTML = jsData[i].ColumnName;
                    tr.appendChild(tTd);

                    var foTd = document.createElement('td');
                    foTd.innerHTML = jsData[i].DataType;
                    tr.appendChild(foTd);

                    var fiTd = document.createElement('td');
                    fiTd.innerHTML = jsData[i].IsNullable ? "Null" : "Not Null";
                    tr.appendChild(fiTd);

                    var fiTd = document.createElement('td');
                    fiTd.innerHTML = jsData[i].IsNullable ? "Null" : "Not Null";
                    tr.appendChild(fiTd);

                    var siTd = document.createElement('td');
                    siTd.innerHTML = jsData[i].Description;
                    tr.appendChild(siTd);

                    database_objects.appendChild(tr);
                }
            }
        };

    </script>
</body>

</html>
